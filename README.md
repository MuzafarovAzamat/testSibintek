# testSibintek
Тестирование Сибинтек

Исходные данные 
/* АЗС производит реализацию нефтепродуктов(Дизель/Бензин) по ценам, указанным в прейскуранте. При этом одной АЗС соответствует один прейскурант.
Задания можно выполнить на https://sqlfiddle.com/ выбрав SQL Server
*/
--Даны таблицы:
--Справочник АЗС (Код АЗС, Имя, код категории прейскуранта)
CREATE TABLE dbo.AZS(IdAZS int, name varchar(100), KategoryPrice int);
INSERT INTO dbo.AZS (IdAZS , name , KategoryPrice ) VALUES  (1,'АЗС 1',1),  (2,'АЗС 2',1),  (3,'АЗС 3',2);
--Таблица с реализацией (Код АЗС, Дата реализации, Продукт, кол-во, Сумма)
CREATE TABLE dbo.Sales(IdAZS int, DateTr date, ProductName varchar(100), kolvo float, summa float );
INSERT INTO dbo. Sales (IdAZS, DateTr, ProductName, kolvo, summa) VALUES
  (1,'20220101', 'Дизель', 100,500); 
--Справочник с Категориями прейскуранта (Код категории прейскуранта, Продукт, Цена за единицу) 
CREATE TABLE dbo.KategoryPrice(KategoryPrice int, ProductName varchar(100), Price float ); 
INSERT INTO dbo. KategoryPrice (KategoryPrice, ProductName, Price) VALUES
  (1,'Бензин', 45), (1,'Дизель', 50), (2,'Бензин', 50), (2,'Дизель', 55);
Задачи
1.	Заполнить справочник с реализацией: 
- Минимум 10 записей на каждую АЗС, период дат –январь апрель (предложить различные варианты заполнения)
2.  Сформировать select запрос, выводящий общую сумму реализации по АЗС, продукту и месяцам
АЗС	Месяц	Продукт	Сумма реализации
АЗС 1	Январь	Бензин	
….	….	…	….
3. Написать хранимую процедуру с обязательными ([beginDate] date, [endDate] date) и необязательными ([IdAZS] int , [ProductName]  varchar(100)) параметрами формата: Procedure (bdate , edate, IdAZS, ProductName), которая будет возвращать  записи из таблицы реализации, где неверно рассчитана сумма исходя из категории прейскуранта АЗС за выбранный период ([beginDate], [endDate]) . В случае, когда необязательные параметры не указаны (один или оба), не учитывать их в фильтре результирующей таблицы. Для проверки хранимой процедуры можно внести заведомо некорректные данные в таблицу реализации.

